# Slack to Bookmark 必要な権限

このアプリケーション（Slack to Bookmark）を実行するために必要なSlack APIの権限とトークンについて説明します。

## 必要なトークンタイプ

- **ユーザートークン（User Token）**: `xoxp-` で始まるトークンが必要です
  - Bot Token（`xoxb-`で始まる）では一部の機能（特にプライベートチャンネルへのアクセス）が制限されるため、ユーザートークンを使用してください

## 必要なスコープ（権限）

Slack APIワークスペースで以下のスコープ（権限）を有効にする必要があります：

1. **`users:read`**: ワークスペース内のユーザー情報を取得するために必要
   - ユーザーDMブックマークを生成する機能で使用

2. **`channels:read`**: 公開チャンネルの情報を取得するために必要
   - 公開チャンネルのブックマークを生成する機能で使用

3. **`groups:read`**: プライベートチャンネルの情報を取得するために必要
   - プライベートチャンネルのブックマークを生成する機能で使用
   - プライベートチャンネルにアクセスするには特にユーザートークンが必要

## 設定方法

1. [Slack API管理画面](https://api.slack.com/apps)にアクセス
2. 新しいアプリを作成するか既存のアプリを選択
3. 「OAuth & Permissions」セクションに移動
4. 「Scopes」セクションで上記のスコープを追加:
   - User Token Scopes」セクションに以下を追加：
     - users:read
     - channels:read
     - groups:read
5. アプリをワークスペースにインストールまたは再インストール
6. 生成された「User OAuth Token」（xoxp-で始まる）をコピー
7. `.env`ファイルの`SLACK_TOKEN`に貼り付け

## トラブルシューティング

認証エラーが発生した場合：

- トークンが有効で期限切れでないことを確認
- 必要なスコープがすべて付与されていることを確認
- ユーザートークン（xoxp-）を使用していることを確認
- アプリをワークスペースに再インストールしてトークンを更新
